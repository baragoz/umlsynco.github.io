var dm=function(){return{base:{},menu:{},ds:{},cs:{},hs:{},dm:{},ms:{ctx:{},ds:{}},at:{cs:{created:null,selected:null}}}}(window);window.dm=dm;dm.base=dm.base;dm.menu=dm.menu;dm.ds=dm.ds;dm.cs=dm.cs;dm.es=dm.es;dm.hs=dm.hs;dm.dm=dm.dm;dm.ms=dm.ms;dm.ms.ctx=dm.ms.ctx;dm.at=dm.at;
(function(d,e,f){e.base.convert=function(a){var c={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","#":"&#035;"};return a.replace(/[<>'"#]/g,function(a){return c[a]})};e.base.diagram=function(a,c,b){var h=a.split("."),k="dm."+a;namespace=h[0];a=h[1];b||(b=c,c=e.base.DiagramElement);e=e||{};e[namespace]=e[namespace]||{};e[namespace][a]=function(b,c){if(arguments.length){b=b||{};b.type==f&&(b.type=a);this._createDiagram(b,c)}};var h=new c,g=d.extend(!0,{},h.options);h.options=g;e[namespace][a].prototype=
d.extend(!0,{},h,{namespace:namespace,diagramName:a,diagramEventPrefix:e[namespace][a].prototype.diagramEventPrefix||a,diagramBaseClass:k,inherited:c.prototype.diagramBaseClass},b)};e.base.DiagramElement=function(a,c){arguments.length&&this._createDiagram(a,c)};e.base.DiagramElement.prototype={options:{editable:!0,nameTemplate:"base"},diagramBaseClass:"dm.base.DiagramElement",_createDiagram:function(a,c){this.options=d.extend(!0,{},this.options,a);this.parrent=c;this.euid=this.options.type+e.ds.diagram.ec;
this.options.name==f&&(this.options.name=this.options.nameTemplate+e.ds.diagram.ec);e.ds.diagram.ec++;this._create();(this.element=d(this.element))?(d(this.element).data(this.euid,this),this._baseinit(),d(this.element).bind("remove."+this.euid,this,function(a){a.data.destroy()}),this._init()):alert("Please, declare method _create() for diagram element "+this.euid)},getDescription:function(a,c){var b=!(a||c),h=Object.getPrototypeOf(this),k="{",g="";this._update();for(var d in this.options)if(this.options[d]!=
f)if(h.options[d]!=f){if(h.options[d]!=this.options[d]||"type"==d)k+=g+'"'+d+'":"'+this.options[d]+'"',g=",\n"}else{var e=this.options[d];if(e instanceof Array){var m="",k=k+(g+'"'+d+'":['),g=",",n;for(n in e)if(b||e[n].option(a)==c)k=e[n]&&e[n].getDescription?k+(m+e[n].getDescription()):k+(m+'"'+e[n]+'"'),m=",";k+="]\n"}else"object"!=typeof e&&(k+=g+'"'+d+'":"'+e+'"',g=",\n")}return k+"}"},_update:function(){d.log("_update")},_create:function(){d.log("_create")},_init:function(){d.log("_init")},
_baseinit:function(){d.log("_baseinit")},_destroy:function(){d.log("_destroy")},destroy:function(){this._destroy();this.element.unbind("."+this.euid).removeData(this.euid)},option:function(a,c){var b=a;if(0===arguments.length)return d.extend({},this.options);if("string"===typeof a){if(c===f)return this.options[a];b={};b[a]=c}this._setOptions(b);return this},_setOptions:function(a){for(var c in a)this._setOption(c,a[c])},_setOption:function(a,c){this.options[a]=c}};e.base.diagram("ds.diagram",{options:{nameTemplate:"diagram",
type2:"diagram",editable:!0},_create:function(){this.options.multicanvas?(this.canvasEuid=this.euid+"_Canvas",this.element=d(this.parrent).append('<div id="'+this.euid+'" class="us-diagram" width="100%" height="100%">          <canvas id="'+this.euid+'_Canvas" class="us-canvas" width='+this.options.width+"px height="+this.options.height+'px>          <p>Unfortunately your browser doesn\'t support canvas.</p></canvas>          <div class="us-canvas-bg" style="width:100%;height:100%;">          </div></div>')):
(this.element=d(this.parrent).append('<div id="'+this.euid+'" class="us-diagram" width="100%" height="100%">          <div class="us-canvas-bg" style="width:100%;height:100%;">          </div></div>'),this.canvasEuid="SingleCanvas");this.canvas=window.document.getElementById(this.canvasEuid);this.max_zindex=100;var a=this;d("#"+this.euid+".us-diagram").scroll(function(){a.draw()});var c=this;d("#"+this.euid).dblclick(function(a){a.preventDefault();d.log("DBL CLICK");a.stopPropagation()}).click(function(a){d.log("clicked");
c._setWidgetsOption("selected",false);d("#"+c.euid+" .us-references").hide();c.draw();a.stopPropagation()});this.connectors=[];this.elements=[];this.removedConnectors=[];this.removedElements=[];for(var b in this.options.elements)this.Element(this.options.elements[b].type,this.options.elements[b]);for(b in this.options.connectors)this.options.connectors[b].stored=!0,this.Connector(this.options.connectors[b].type,this.options.connectors[b]);e.dm.loader.OnLoadComplete(function(){for(var a in c.elements){var b=
c.elements[a].options.dropped;if(b){c.elements[a]._dropped={};for(var f in b)for(var d in c.elements)if(c.elements[d].options.id==b[f]){var e=c.elements[d].euid;c.elements[a]._dropped[e]=e;break}}}})},_init:function(){},_destroy:function(){if(this.onDestroyObserver)this.onDestroyObserver()},onDestroy:function(a){this.onDestroyObserver=a},Element:function(a,c,b){e.ds.diagram.ec++;var c=c||{},h=this;h.max_zindex++;c["z-index"]=h.max_zindex;c.ctx_menu=c.ctx_menu||"default";e.dm.loader.Element(a,c,this,
function(a){a!=f&&(h.elements[a.euid]=a);b&&b(a)});return c.euid},_setWidgetsOption:function(a,c){if("selected"==a){this.multipleSelection=c;for(var b in this.elements)this.elements[b]._setOption(a,c);for(b in this.connectors)this.connectors[b]._setOption(a,c);this.selectedConnector=this.selectedElement=f}else if("z-index"==a){var h=this.max_zindex,k=f,g=f,e=f;for(b in this.elements){var l=this.elements[b].option(a);this.elements[b].option("selected")?(k=k==f||l<k?l:k,g=g==f||l>g?l:g):e=e==f||l<e?
l:e}if(e==f||k==f)return;d.log("Min Z-INDEX: "+k);l="front"==c?!0:!1;for(b in this.elements)if(this.elements[b].option("selected")){if(l){var m=this.elements[b].option(a)+this.max_zindex-k+1;d.log("new Z-INDEX: "+m+" D: "+this.elements[b].option(a));this.elements[b]._setOption(a,m);m>h&&(h=m)}}else l||(m=this.elements[b].option(a)-e+g+1,d.log("new2 Z-INDEX: "+m+" D: "+this.elements[b].option(a)),this.elements[b]._setOption(a,m),m>h&&(h=m));this.max_zindex=h+1}else{(h="selected"!=a)&&this.opman.startTransaction();
for(b in this.elements)this.elements[b].option("selected")&&(k={},g={},k[a]=this.elements[b].options[a],g[a]=c,h&&this.opman.reportShort("option",this.elements[b].euid,k,g),d.log("SET KEY : "+a+"  VALUE : "+c),this.elements[b]._setOption(a,c));for(b in this.connectors)this.connectors[b].option("selected")&&(k[a]=this.connectors[b].options[a],g[a]=c,this.connectors[b]._setOption(a,c)&&h&&this.opman.reportShort("option",this.elements[b].euid,k,g))}this.draw()},Connector:function(a,c,b){var h=this;e.dm.loader.Connector(a,
c,this,function(a){a!=f&&(h.connectors[a.euid]=a,"ConnectionHelper"!=a.options.toId&&d.log("REPORT: "+a.options.toId+"   FROM : "+a.options.fromId),h.draw(),b&&b(a))})},draw:function(){if(this.canvas){var a=this.canvas.getContext("2d");a.fillStyle="#EEEEEE";a.clearRect(0,0,this.canvas.width,this.canvas.height);if(0<Object.keys(this.connectors).length){for(var c in this.connectors)(a.lineWidth=1,this.connectors[c].options.linewidth!=f&&(a.lineWidth=this.connectors[c].options.linewidth),this.connectors[c].options.selected)?
(a.lineWidth+=2,this.connectors[c].redraw(a,"#43EC28"),a.lineWidth-=2,this.connectors[c].redraw(a)):this.selectedconntector==this.connectors[c]?this.connectors[c].redraw(a,"#43EC28"):this.connectors[c].options.color?this.connectors[c].redraw(a,this.connectors[c].options.color):this.connectors[c].redraw(a);a.lineWidth=1}}},isPointOnLine:function(a,c){if(0<Object.keys(this.connectors).length){if(!0==this.transformStarted)return this.selectedconntector.TransformTo(a,c),this.draw(),!0;for(var b in this.connectors)if(this.connectors[b].isPointOnLine(a,
c))return this.connectors[b]!=this.selectedconntector&&(this.selectedconntector=this.connectors[b],this.draw()),!0}this.selectedconntector!=f&&(this.selectedconntector=f,e.at.cs.mouseover=null,this.draw());return!1}});e.base.diagram("es.element",{options:{drop:!1,nameTemplate:"Element",width:140,height:200,left:140,top:200,selected:!1,area:"none",ctx_menu:"default",editable:!0},_create:function(){alert("Could not create virtual element !!!")},_update:function(){var a=d("#"+this.euid+"_Border").position();
this.options.pageX=a.left;this.options.pageY=a.top;this.options.left=a.left;this.options.top=a.top;this.options.width=d("#"+this.euid+"_Border").width();this.options.height=d("#"+this.euid+"_Border").height();if(this._dropped){this.options.dropped=[];for(var c in this._dropped)this.parrent.elements[c]?this.options.dropped.push(this.parrent.elements[c].options.id):alert("NOTE FOUND: "+c)}},_init:function(){this.options.height&&(d("#"+this.euid).css("width",this.options.width).css("height",this.options.height),
d("#"+this.euid+"_Border").css("width",this.options.width));this.options.top&&d("#"+this.euid).css("top",this.options.top)},_baseinit:function(){var a="";this.options.pageX!=f&&this.options.pageY!=f&&(a=" style='top:"+this.options.pageY+"px;left:"+this.options.pageX+"px;' ");d(this.element).wrap('<div id="'+this.euid+'_Border"'+a+' class="us-element-border"></div>');this.highlighted=!1;this.refN=0;this.options.references=this.options.references||[];var a=this.options.subdiagrams||this.options.references||
{},c;c="<div class='us-references us-list'><ul class='context-menu-3'><li id='reference-new'><a>new reference</a></li></ul></div>";d("#"+this.euid+"_Border").css({position:"absolute"}).css("top",this.options.pageY).css("left",this.options.pageX);d("#"+this.euid+"_Border .ui-resizable-handle").css({visibility:"hidden"});d("#"+this.euid).click(this,function(){d("#"+element.parrent.euid+" .us-references").hide()}).mouseenter(this,function(a){a=a.data;if(!a.options.selected&&!a.highlighted){a.highlighted=
!0;var b=d("#"+this.id+"_Border").css({"border-width":"3px"}),c=b.css("border-left-width");b.css({left:"-="+c,top:"-="+c})}!a.parrent.options.editable&&(a.options.subdiagrams||0!=a.options.references.length)&&d("#"+this.id+"_REF").css({visibility:"visible"})}).mouseleave(this,function(a){a=a.data;if(!a.options.selected&&a.highlighted){var b=d("#"+this.id+"_Border"),c=b.css("border-left-width");b.css({"border-width":"0px"}).css({left:"+="+c,top:"+="+c});a.highlighted=!1}d("#"+this.id+"_REF").css({visibility:"hidden"})}).append("<img id='"+
this.euid+"_REF' title='REFERENCE' src='./images/reference.png' class='us-element-ref' style='z-index:99999;visibility:hidden;'></img>").parent().append(c);for(var b in a)this.addReference({text:a[b]},!0);d("#"+this.euid+"_Border .us-references").hide().click(function(a){a.stopPropagation()});d("img#"+this.euid+"_REF").attr("title",this.options.subdiagrams).click(this,function(a){var b=a.data,c="none"==d("#"+b.euid+" .us-references").css("display");d("#"+b.parrent.euid+" .us-references").hide();c||
(c=d(this).position(),d("#"+b.euid+"_Border .us-references").show().css({top:c.top+20,left:c.left}));a.stopPropagation()});this.options.color&&this._setOption("color",this.options.color);this.options.borderwidth&&this._setOption("borderwidth",this.options.borderwidth);this.options["font-family"]&&this._setOption("font-family",this.options["font-family"]);this.options["z-index"]&&d("#"+this.euid+"_Border").css("z-index",this.options["z-index"])},addReference:function(a,c){var b;b="reference-"+this.refN;
++this.refN;c||this.options.references.push(a.text);var h=a.idx==f?this.refN:a.idx;b=d("<li id='reference'><a id='"+b+"' class='editablefield reference'>"+a.text+"</a><a class='ui-corner-all'><span class='ui-test ui-icon ui-icon-close' style='float:right;'></span></a></li>");h=d("#"+this.euid+"_Border .us-references ul li:eq("+h+")");b=1==h.length?b.insertAfter(h):b.appendTo("#"+this.euid+"_Border div.us-references ul");b=b.children("A.reference").bind("click",this,function(a){var b=a.data;b.parrent.options.editable||
e.dm.fw.loadContent2(b.parrent.parrent,d(this).text());a.stopPropagation()})},_setOption:function(a,c){var b=this.options[a];if(!(this._setOption2!=f&&this._setOption2(a,c)))if("font-color"==a)d("#"+this.euid+"_Border.us-element-border a").css("color",c);else if("left"==a)d("#"+this.euid+"_Border").css(a,c);else if("top"==a)d("#"+this.euid+"_Border").css(a,c);else if("color"==a)d("#"+this.euid).css("background-color",c||"");else if("borderwidth"==a)d("#"+this.euid).css("border-width",c||"");else if("width"==
a)d("#"+this.euid+"_Border").css("width",c);else if("height"==a){if(d("#"+this.euid+"_Border").css("height",c),b&&c!=b){var b=parseInt(c)-parseInt(b),h=0<b?"+="+b:"-="+Math.abs(b);0!=b&&d("#"+this.euid+"_Border .us-element-resizable-area").css("height",h)}}else"font-family"==a?d("#"+this.euid).css(a,c||""):"selected"==a?c?(d("#"+this.euid+"_Border .ui-resizable-handle").css({visibility:"visible"}),this.highlighted||(b=d("#"+this.euid+"_Border").css({"border-width":"3px"}),h=b.css("border-left-width"),
b.css({left:"-="+h,top:"-="+h}),this.highlighted=!0)):(d("#"+this.euid+"_Border .ui-resizable-handle").css({visibility:"hidden"}),this.highlighted&&(b=d("#"+this.euid+"_Border"),h=b.css("border-left-width"),b.css({"border-width":"0px"}).css({left:"+="+h,top:"+="+h})),this.highlighted=!1):"z-index"==a&&d("#"+this.euid+"_Border ").css(a,c||"");this.options[a]=c}});e.ds.diagram=e.ds.diagram||{};e.ds.diagram.ec=0;e.base.diagram("cs.connector",{options:{selected:!1,nameTemplate:"Connector",ctx_menu:"connector"},
addLabel:function(a){var c=this,b=a.lid!=f?a.lid:this.euid+"_l"+this.label_count;a.lid==f&&++this.label_count;d("<div id='"+b+"' class='editablefield' style=\"position:absolute;z-index:99999;background-color:white;\">"+a.text+"</div>").appendTo("#"+this.parrent.euid).css("left",a.left).css("top",a.top).mouseenter(function(){c.options.selected=!0;c.parrent.draw();for(var a in c.labels)d(c.labels[a]).addClass("us-connector-hover")}).mouseleave(function(){c.options.selected=!1;c.parrent.draw();for(var a in c.labels)d(c.labels[a]).removeClass("us-connector-hover")})},
_setOption:function(a,c){if(c==f)delete this.options[a];else if("epoints"==a)for(var b in c)this.epoints[b][0]=c[b][0],this.epoints[b][1]=c[b][1];else if("labels"==a)for(b in c)this.labels[b].css({left:c[b][0],top:c[b][1]});else this.options[a]=c},_create:function(){this.epoints=[];var a=this;this.options.epoints!=f&&d.each(this.options.epoints,function(b,c){a.epoints[b]=[];a.epoints[b][0]=parseInt(c[0]);a.epoints[b][1]=parseInt(c[1])});this.label_count=0;this.cleanOnNextTransform=!1;e.at.cs.created=
{euid:this.euid,from:this.options.fromId,to:this.options.toId};if(this.options.stored){for(var c in this.parrent.elements)if(this.parrent.elements[c].options.id==this.options.fromId&&(this.from=this.parrent.elements[c].euid),this.parrent.elements[c].options.id==this.options.toId)this.toId=this.parrent.elements[c].euid;if(this.options.epoints)for(c in e.debug=e.debug||{},e.debug[this.euid]=this.options.epoints,this.epoints=[],this.options.epoints)this.epoints[c]={},this.epoints[c][0]=parseInt(this.options.epoints[c][0],
10),this.epoints[c][1]=parseInt(this.options.epoints[c][1],10);this.options.fromId=this.from;this.options.toId=this.toId}else this.from=this.options.fromId,this.toId=this.options.toId;this.labels=[];for(c in this.options.labels){var b=this.options.labels[c];this.addLabel({text:b.name,left:parseInt(b.x),top:parseInt(b.y)})}},_init:function(){},_baseinit:function(){},drawSelected:function(a,c,b){a.beginPath();a.fillStyle=b;a.strokeStyle=b;a.moveTo(c[0][0],c[0][1]);for(b=1;b<c.length;++b)a.lineTo(c[b][0],
c[b][1]);a.stroke();a.closePath()},draw:function(){},redraw:function(a,c){var b=c||"rgba(0,0,0,1)";if(a!=f){this.points=this._getConnectionPoints(this.from,this.toId,this.epoints);this.gip=[];for(var h=0;h<this.points.length-1;++h){var d=this.points[h][1]-this.points[h+1][1],e=this.points[h][0]-this.points[h+1][0];this.gip[h]=Math.sqrt(e*e+d*d)}this.draw(a,this.points,b)}},_getRValue:function(a,c,b){var f=c-a;return 0<f?f>b?a+b:c:a},isPointOnLine:function(a,c){if(this.points==f)return!1;for(var b=
0;b<this.epoints.length;++b)if(this.epoints[b][0]-12<a&&this.epoints[b][0]+12>a&&this.epoints[b][1]-12<c&&this.epoints[b][1]+12>c)return e.at.cs.mouseover={euid:this.euid,idx:b},!0;for(b=0;b<this.points.length-1;++b){var h=a-this.points[b][0],d=c-this.points[b][1],g=this.points[b+1][0]-a,j=this.points[b+1][1]-c,h=Math.sqrt(h*h+d*d),g=Math.sqrt(g*g+j*j);if(0.2>h+g-this.gip[b])return e.at.cs.mouseover={euid:this.euid},!0}return!1},canRemovePoint:function(a,c,b){if(a==f||c==f)return!1;var h=a[0]-c[0],
d=a[1]-c[1],e=a[0]-b[0],j=a[1]-b[1],a=c[0]-b[0],c=c[1]-b[1],e=Math.sqrt(e*e+j*j),a=Math.sqrt(a*a+c*c),h=Math.sqrt(h*h+d*d);return 0.5>e+a-h?!0:!1},_getConnectionPoints:function(a,c,b){var h=d("#"+a).position(),k=d("#"+c).position();if(null!=k){var e=d("#"+a+"_Border").position(),j=d("#"+c+"_Border").position(),l=0,m=0;if(b==f||0==b.length)var n=this._getRValue(h.left+e.left,k.left+j.left,d("#"+a).width()),o=this._getRValue(h.top+e.top,k.top+j.top,d("#"+a).height()),a=this._getRValue(k.left+j.left,
h.left+e.left,d("#"+c).width()),c=this._getRValue(k.top+j.top,h.top+e.top,d("#"+c).height()),h=[[n+m,o+l],[a+m,c+l]];else{var l=d("#"+this.parrent.euid).scrollTop(),m=d("#"+this.parrent.euid).scrollLeft(),p=b.length-1,n=this._getRValue(h.left+e.left,b[0][0]-m,d("#"+a).width()),o=this._getRValue(h.top+e.top,b[0][1]-l,d("#"+a).height()),a=this._getRValue(k.left+j.left,b[p][0]-m,d("#"+c).width()),c=this._getRValue(k.top+j.top,b[p][1]-l,d("#"+c).height()),h=[];h[0]=[n,o];for(n=1;n<=b.length;++n)h[n]=
[b[n-1][0],b[n-1][1]],h[n][0]-=m,h[n][1]-=l;h[b.length+1]=[a,c]}return h}}})})(jQuery,dm);
(function(d,e,f){e.base.diagram("es.class",e.es.element,{options:{nameTemplate:"Class",width:"150px",height:"auto"},_getAux:function(a){var c=[];c.Class="";c.Interface="interface";c.Enumeration="enum";c.Primitive="primitive";c.ORM="ORM";c.ORMComponent="ORMComponent";c.Template=" ";c[f]="";return c[a]||a},addOperation:function(a){if("Enumeration"!=this.options.aux){var c=a.idx==f?this.opN:a.idx,b;b="operation-"+this.opN;++this.opN;this.options.operations.push(a.text);a=d('<li id="operation"><a id="'+
b+'" class="editablefield operation" >'+a.text+"</a></li>");c=d("#"+this.euid+" .us-class-operations .us-sortable li:eq("+c+")");1==c.length?a.insertAfter(c):a.appendTo("#"+this.euid+" .us-class-operations .us-sortable");a=a.children("a");c=a.height();e.base.editable(this,a,!0);a=d("#"+this.euid+" .us-class-operations .us-sortable").sortable("refresh").height();b=d("#"+this.euid+" .us-class-operations").height();a>b&&(d("#"+this.euid+"_Border").height(),d("#"+this.euid+"_Border").height("+="+c),d("#"+
this.euid+" .us-class-operations").height("+="+c),a=d("#"+this.euid+"_Border").height(),this.options.height=a,this.options.height_o+=c)}},addAttribute:function(a){if("Interface"!=this.options.aux){var c;c="attribute-"+this.atrN;++this.atrN;var b=a.idx==f?this.opN:a.idx,a=d('<li id="attribute"><a id="'+c+'" class="editablefield attribute" >'+a.text+"</a></li>"),b=d("#"+this.euid+" .us-class-attributes .us-sortable li:eq("+b+")"),a=1==b.length?a.insertAfter(b):a.appendTo("#"+this.euid+" .us-class-attributes .us-sortable"),
b=a.height(),a=d("#"+this.euid+" .us-class-attributes .us-sortable").sortable("refresh").height();c=d("#"+this.euid+" .us-class-attributes").height();a>c&&(d("#"+this.euid+"_Border .us-class-attributes").height(),d("#"+this.euid+"_Border").height("+="+b),d("#"+this.euid+" .us-class-attributes").height("+="+b),b=d("#"+this.euid+"_Border .us-class-attributes").height(),this.options.height_a=b,this.options.height=d("#"+this.euid+"_Border").height())}},_create:function(){var a="",c="";this.opN=this.atrN=
0;this.options.operations=this.options.operations||[];this.options.attributes=this.options.attributes||[];this.options.aux&&""!=this.options.aux&&(a=this._getAux(this.options.aux),a!=f&&(""!=a&&" "!=a)&&(c="&lt&lt "+a+" &gt&gt"),a="Template"!=this.options.aux?"":"<div id='template' class='editablefield us-class-template'>"+(this.options.template||"T")+"</div>");var b="",h="",e;for(e in this.options.operations)b+='<li id="operation"><a id="operation-'+this.atrN+'" class="editablefield operation">'+
this.options.operations[e]+"</a></li>",this.atrN++;for(e in this.options.attributes)h+='<li id="attribute"><a id="attribute-'+this.opN+'" class="editablefield attribute">'+this.options.attributes[e]+"</a></li>",this.opN++;this.innerHtmlClassInfo='        <div id="'+this.euid+'" class="us-class grElement">'+a+'        <div class="us-class-header">        <a id="name" class="editablefield us-class-name">'+this.options.name+'</a><br>        <a id="aux" class="us-class-aux">'+c+'</a>        </div>        <div class="us-class-attributes"><ul class="us-sortable">'+
h+'</ul></div>        <div class="us-class-operations us-element-resizable-area"><ul class="us-sortable">'+b+"</ul></div>        </div>      ";d("#"+this.parrent.euid).append(this.innerHtmlClassInfo);this.element=d("#"+this.euid)},_init:function(){this._setOptions(this.options);this.attributes=[];this.operations=[]},_setOption2:function(a,c){if("height_o"==a)return d("#"+this.euid+"_Border .us-class-operations").css("height",c),!0;if("height_a"==a){var b=this.options[a];d("#"+this.euid+"_Border .us-class-attributes").css("height",
c);b=parseInt(c)-parseInt(b);if(0!=b){var f=0<b?"+="+b:"-="+Math.abs(b);d("#"+this.euid+"_Border").css("height",f);this.options.height+=b}return!0}"editable"==a&&d("#"+this.euid+" .us-sortable").sortable({disabled:!0==c?!1:!0});return!1},ec:0})})(jQuery,dm);
(function(d,e,f){e.dm.loader=e.dm.loader||null;e.base.loader=function(a){e.dm.loader||(e.dm.loader=new function(){this.working=!1;return{getUrl:function(){return a},_addToLoadQueue:function(a){var b=e.dm.loader;b._loadQueue||(b.working=!1,b._loadQueue=[]);b._loadQueue.push(a);b._process(!1)},_process:function(c){var b=null,f=e.dm.loader;if(!f.working){if(c&&0<f._loadQueue.length||1==f._loadQueue.length&&!f.working)f.working=!0,b=f._loadQueue.shift();if(b){var k=b.callback,g=b.data;b.precondition()?
d.ajax({url:a+b.url,dataType:"script",success:function(){k(g);f.working=!1;f._process(!0)},error:function(){alert("Failed to load: "+a+b.url);f.working=!1;f._process(!0)}}):(k(g),f.working=!1,f._process(!0))}else f.working=!1}},OnLoadComplete:function(a,b){this._addToLoadQueue({url:"",precondition:function(){return!1},callback:function(b){a&&a(b)},data:b})},Diagram:function(a,b,h,k,g){(e.ds==f||e.ds.diagram==f)&&this._addToLoadQueue({url:"./dm/ds/diagram.js",precondition:function(){return!0},callback:function(){},
data:null});var j={},l=h||{};l.type=a;l.base_type=b;j.options=h;j.diagram=a;j.type=b;j.parrent=k;this._addToLoadQueue({url:"/dm/ds/"+b+".js",precondition:function(){return e.ds==f||e.ds[b]==f?!0:!1},callback:function(a){a=new e.ds[a.type](h,k);d.log("NAME: "+k);g&&g(a);return a},data:j})},LoadElement:function(a){e.es==f?alert("You should create diagram instance first !!!"):e.es[a]==f&&this._addToLoadQueue({url:"/dm/es/"+a+".js",precondition:function(){return e.es[a]==f?!0:!1},callback:function(){}})},
Element:function(a,b,d,k){if(e.es==f)alert("You should create diagram instance first !!!");else{var g={};g.options=b;g.type=a;g.diagram=d;this._addToLoadQueue({url:"/dm/es/"+a+".js",precondition:function(){return e.es[a]==f?!0:!1},callback:function(a){a=new e.es[a.type](a.options,a.diagram);k&&k(a)},data:g})}},Connector:function(a,b,d,k){if(e.cs==f)alert("You should create diagram instance first !!!");else{var g={};g.options=b;g.type=a;g.diagram=d;this._addToLoadQueue({url:"./dm/cs/"+a+".js",precondition:function(){return e.cs[a]==
f?!0:!1},callback:function(a){a=new e.cs[a.type](a.options,a.diagram);k!=f&&k(a)},data:g})}}}},e.dm.loader.url=a,e.dm.loader.working=!1);return e.dm.loader};e.base.loader=e.base.loader})(jQuery,dm);
(function(d,e){e.base.diagram("cs.aggregation",e.cs.connector,{draw:function(f,a,c){if(!(null==a||2>a.length)){var b=a.length-1,d=a[b][0]-a[b-1][0],e=a[b][1]-a[b-1][1],g=Math.sqrt(d*d+e*e);if(!(10>g)){var j=e/g,l=d/g,m=a[b][0]-Math.sqrt(75)*l,n=a[b][1]-Math.sqrt(75)*j,d=a[b][0]-Math.sqrt(300)*l,g=a[b][1]-Math.sqrt(300)*j,e=m+10*j/2,o=n-10*l/2,j=m-10*j/2,l=n+10*l/2;f.beginPath();f.fillStyle=c;f.strokeStyle=c;f.moveTo(a[0][0],a[0][1]);for(c=1;c<b;++c)f.lineTo(a[c][0],a[c][1]);f.moveTo(a[b-1][0],a[b-
1][1]);f.lineTo(d,g);f.lineTo(e,o);f.lineTo(a[b][0],a[b][1]);f.lineTo(j,l);f.lineTo(d,g);f.stroke();f.closePath()}}}})})(jQuery,dm);
(function(d,e){e.base.diagram("cs.nested",e.cs.connector,{draw:function(f,a,c){if(!(null==a||2>a.length)){var b=a.length-1,d=a[b][0]-a[b-1][0],e=a[b][1]-a[b-1][1],g=Math.sqrt(d*d+e*e),e=e/g,j=d/g,d=a[b][0]-Math.sqrt(168.75)*j,l=a[b][1]-Math.sqrt(168.75)*e,m=a[b][0]-Math.sqrt(675)*j,n=a[b][1]-Math.sqrt(675)*e,o=d+12*e/2,p=l-12*j/2,q=d-12*e/2,r=l+12*j/2,s=a[b][0]-Math.sqrt(108)*j,t=a[b][1]-Math.sqrt(108)*e,j=a[b][0]-Math.sqrt(432)*j,e=a[b][1]-Math.sqrt(432)*e;f.beginPath();f.fillStyle=c;f.strokeStyle=
c;f.moveTo(a[0][0],a[0][1]);for(i=1;i<b;++i)f.lineTo(a[i][0],a[i][1]);15>g||(f.moveTo(a[b-1][0],a[b-1][1]),f.lineTo(m,n),f.stroke(),f.moveTo(d,l),f.arc(d,l,7.5,0,2*Math.PI,!0),f.moveTo(o,p),f.lineTo(q,r),f.moveTo(s,t),f.lineTo(j,e),f.stroke(),f.closePath())}}})})(jQuery,dm);
(function(d,e){e.base.diagram("cs.dependency",e.cs.connector,{dashedLine:function(f,a,c){var b=f[0],f=f[1],d=a[0]-b,e=a[1]-f,a=Math.sqrt(d*d+e*e);if(!(10>a)){var e=e/a,g=d/a,d=5*g,j=5*e,g=3*g,e=3*e;for(i=0;i<a/8;++i)c.moveTo(b,f),c.lineTo(b+d,f+j),b+=g+d,f+=e+j}},draw:function(f,a,c){if(!(null==a||2>a.length)){var b=a.length-1,d=a[b][0],e=a[b][1],g=d-a[b-1][0],j=e-a[b-1][1],b=Math.sqrt(g*g+j*j),j=j/b,l=g/b,m=d-Math.sqrt(75)*l,n=e-Math.sqrt(75)*j;Math.sqrt(300);Math.sqrt(300);g=m+10*j/2;b=n-10*l/2;
j=m-10*j/2;l=n+10*l/2;f.beginPath();f.fillStyle=c;f.strokeStyle=c;for(c=0;c<a.length-1;++c)this.dashedLine(a[c],a[c+1],f);f.moveTo(g,b);f.lineTo(d,e);f.lineTo(j,l);f.stroke();f.closePath()}}})})(jQuery,dm);
(function(d,e){e.base.diagram("cs.generalization",e.cs.connector,{draw:function(f,a,c){if(!(null==a||2>a.length)){var b=a.length-1,d=a[b][0],e=a[b-1][0],g=a[b][1],j=a[b-1][1],l=d-e,m=g-j,n=Math.sqrt(l*l+m*m);if(!(10>n)){var m=m/n,o=l/n,l=d-Math.sqrt(75)*o,n=g-Math.sqrt(75)*m;Math.sqrt(300);Math.sqrt(300);var p=l+10*m/2,q=n-10*o/2,m=l-10*m/2,o=n+10*o/2;f.beginPath();f.fillStyle=c;f.strokeStyle=c;f.moveTo(a[0][0],a[0][1]);for(i=1;i<b;++i)f.lineTo(a[i][0],a[i][1]);f.moveTo(e,j);f.lineTo(l,n);f.lineTo(p,
q);f.lineTo(d,g);f.lineTo(m,o);f.lineTo(l,n);f.stroke();f.closePath()}}}})})(jQuery,dm);
(function(d,e){e.base.diagram("cs.realization",e.cs.connector,{dashedLine:function(f,a,c){var b=f[0],f=f[1],d=a[0]-b,e=a[1]-f,a=Math.sqrt(d*d+e*e);if(!(10>a)){var e=e/a,g=d/a,d=5*g,j=5*e,g=3*g,e=3*e;for(i=0;i<a/8;++i)c.moveTo(b,f),c.lineTo(b+d,f+j),b+=g+d,f+=e+j}},draw:function(d,a,c){if(!(null==a||2>a.length)){var b=a.length-1,e=a[b][0],k=a[b][1],g=e-a[b-1][0],j=k-a[b-1][1],b=Math.sqrt(g*g+j*j),l=j/b,m=g/b,g=e-Math.sqrt(75)*m,j=k-Math.sqrt(75)*l;Math.sqrt(300);Math.sqrt(300);var n=g+10*l/2,o=j-10*
m/2,l=g-10*l/2,m=j+10*m/2;d.beginPath();d.fillStyle=c;d.strokeStyle=c;for(c=0;c<a.length-1;++c)this.dashedLine(a[c],a[c+1],d);10>b||(d.moveTo(g,j),d.lineTo(n,o),d.lineTo(e,k),d.lineTo(l,m),d.lineTo(g,j));d.stroke();d.closePath()}}})})(jQuery,dm);
(function(d,e){e.base.diagram("cs.composition",e.cs.connector,{draw:function(d,a,c){if(!(null==a||2>a.length)){var b=a.length-1,e=a[b][0]-a[b-1][0],k=a[b][1]-a[b-1][1],g=Math.sqrt(e*e+k*k);if(!(10>g)){var k=k/g,j=e/g,l=a[b][0]-Math.sqrt(75)*j,m=a[b][1]-Math.sqrt(75)*k,e=a[b][0]-Math.sqrt(300)*j,g=a[b][1]-Math.sqrt(300)*k,n=l+10*k/2,o=m-10*j/2,k=l-10*k/2,j=m+10*j/2;d.beginPath();d.fillStyle=c;d.strokeStyle=c;d.moveTo(a[0][0],a[0][1]);for(i=1;i<b;++i)d.lineTo(a[i][0],a[i][1]);d.stroke();d.closePath();
d.beginPath();d.fillStyle=c;d.strokeStyle=c;d.moveTo(a[b-1][0],a[b-1][1]);d.lineTo(e,g);d.lineTo(n,o);d.lineTo(a[b][0],a[b][1]);d.lineTo(k,j);d.lineTo(e,g);d.fill();d.stroke();d.closePath()}}}})})(jQuery,dm);
