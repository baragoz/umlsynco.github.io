var dm=function(){return{base:{},menu:{},ds:{},cs:{},hs:{},dm:{},ms:{ctx:{},ds:{}},at:{cs:{created:null,selected:null}}}}(window);window.dm=dm;dm.base=dm.base;dm.menu=dm.menu;dm.ds=dm.ds;dm.cs=dm.cs;dm.es=dm.es;dm.hs=dm.hs;dm.dm=dm.dm;dm.ms=dm.ms;dm.ms.ctx=dm.ms.ctx;dm.at=dm.at;
(function(e,d,f){d.base.convert=function(a){var c={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","#":"&#035;"};return a.replace(/[<>'"#]/g,function(a){return c[a]})};d.base.diagram=function(a,c,b){var j=a.split("."),m="dm."+a;namespace=j[0];a=j[1];b||(b=c,c=d.base.DiagramElement);d=d||{};d[namespace]=d[namespace]||{};d[namespace][a]=function(b,c){if(arguments.length){b=b||{};b.type==f&&(b.type=a);this._createDiagram(b,c)}};var j=new c,h=e.extend(!0,{},j.options);j.options=h;d[namespace][a].prototype=
e.extend(!0,{},j,{namespace:namespace,diagramName:a,diagramEventPrefix:d[namespace][a].prototype.diagramEventPrefix||a,diagramBaseClass:m,inherited:c.prototype.diagramBaseClass},b)};d.base.DiagramElement=function(a,c){arguments.length&&this._createDiagram(a,c)};d.base.DiagramElement.prototype={options:{editable:!0,nameTemplate:"base"},diagramBaseClass:"dm.base.DiagramElement",_createDiagram:function(a,c){this.options=e.extend(!0,{},this.options,a);this.parrent=c;this.euid=this.options.type+d.ds.diagram.ec;
this.options.name==f&&(this.options.name=this.options.nameTemplate+d.ds.diagram.ec);d.ds.diagram.ec++;this._create();(this.element=e(this.element))?(e(this.element).data(this.euid,this),this._baseinit(),e(this.element).bind("remove."+this.euid,this,function(a){a.data.destroy()}),this._init()):alert("Please, declare method _create() for diagram element "+this.euid)},getDescription:function(a,c){var b=!(a||c),j=Object.getPrototypeOf(this),m="{",e="";this._update();for(var g in this.options)if(this.options[g]!=
f)if(j.options[g]!=f){if(j.options[g]!=this.options[g]||"type"==g)m+=e+'"'+g+'":"'+this.options[g]+'"',e=",\n"}else{var d=this.options[g];if(d instanceof Array){var k="",m=m+(e+'"'+g+'":['),e=",",n;for(n in d)if(b||d[n].option(a)==c)m=d[n]&&d[n].getDescription?m+(k+d[n].getDescription()):m+(k+'"'+d[n]+'"'),k=",";m+="]\n"}else"object"!=typeof d&&(m+=e+'"'+g+'":"'+d+'"',e=",\n")}return m+"}"},_update:function(){e.log("_update")},_create:function(){e.log("_create")},_init:function(){e.log("_init")},
_baseinit:function(){e.log("_baseinit")},_destroy:function(){e.log("_destroy")},destroy:function(){this._destroy();this.element.unbind("."+this.euid).removeData(this.euid)},option:function(a,c){var b=a;if(0===arguments.length)return e.extend({},this.options);if("string"===typeof a){if(c===f)return this.options[a];b={};b[a]=c}this._setOptions(b);return this},_setOptions:function(a){for(var c in a)this._setOption(c,a[c])},_setOption:function(a,c){this.options[a]=c}};d.base.diagram("ds.diagram",{options:{nameTemplate:"diagram",
type2:"diagram",editable:!0},_create:function(){this.options.multicanvas?(this.canvasEuid=this.euid+"_Canvas",this.element=e(this.parrent).append('<div id="'+this.euid+'" class="us-diagram" width="100%" height="100%">          <canvas id="'+this.euid+'_Canvas" class="us-canvas" width='+this.options.width+"px height="+this.options.height+'px>          <p>Unfortunately your browser doesn\'t support canvas.</p></canvas>          <div class="us-canvas-bg" style="width:100%;height:100%;">          </div></div>')):
(this.element=e(this.parrent).append('<div id="'+this.euid+'" class="us-diagram" width="100%" height="100%">          <div class="us-canvas-bg" style="width:100%;height:100%;">          </div></div>'),this.canvasEuid="SingleCanvas");this.canvas=window.document.getElementById(this.canvasEuid);this.max_zindex=100;var a=this;e("#"+this.euid+".us-diagram").scroll(function(){a.draw()});var c=this;e("#"+this.euid).dblclick(function(a){a.preventDefault();e.log("DBL CLICK");a.stopPropagation()}).click(function(a){e.log("clicked");
c._setWidgetsOption("selected",false);e("#"+c.euid+" .us-references").hide();c.draw();a.stopPropagation()});this.connectors=[];this.elements=[];this.removedConnectors=[];this.removedElements=[];for(var b in this.options.elements)this.Element(this.options.elements[b].type,this.options.elements[b]);for(b in this.options.connectors)this.options.connectors[b].stored=!0,this.Connector(this.options.connectors[b].type,this.options.connectors[b]);d.dm.loader.OnLoadComplete(function(){for(var a in c.elements){var b=
c.elements[a].options.dropped;if(b){c.elements[a]._dropped={};for(var f in b)for(var e in c.elements)if(c.elements[e].options.id==b[f]){var d=c.elements[e].euid;c.elements[a]._dropped[d]=d;break}}}})},_init:function(){},_destroy:function(){if(this.onDestroyObserver)this.onDestroyObserver()},onDestroy:function(a){this.onDestroyObserver=a},Element:function(a,c,b){d.ds.diagram.ec++;var c=c||{},j=this;j.max_zindex++;c["z-index"]=j.max_zindex;c.ctx_menu=c.ctx_menu||"default";d.dm.loader.Element(a,c,this,
function(a){a!=f&&(j.elements[a.euid]=a);b&&b(a)});return c.euid},_setWidgetsOption:function(a,c){if("selected"==a){this.multipleSelection=c;for(var b in this.elements)this.elements[b]._setOption(a,c);for(b in this.connectors)this.connectors[b]._setOption(a,c);this.selectedConnector=this.selectedElement=f}else if("z-index"==a){var j=this.max_zindex,m=f,h=f,g=f;for(b in this.elements){var d=this.elements[b].option(a);this.elements[b].option("selected")?(m=m==f||d<m?d:m,h=h==f||d>h?d:h):g=g==f||d<g?
d:g}if(g==f||m==f)return;e.log("Min Z-INDEX: "+m);d="front"==c?!0:!1;for(b in this.elements)if(this.elements[b].option("selected")){if(d){var k=this.elements[b].option(a)+this.max_zindex-m+1;e.log("new Z-INDEX: "+k+" D: "+this.elements[b].option(a));this.elements[b]._setOption(a,k);k>j&&(j=k)}}else d||(k=this.elements[b].option(a)-g+h+1,e.log("new2 Z-INDEX: "+k+" D: "+this.elements[b].option(a)),this.elements[b]._setOption(a,k),k>j&&(j=k));this.max_zindex=j+1}else{for(b in this.elements)this.elements[b].option("selected")&&
this.elements[b]._setOption(a,c);for(b in this.connectors)this.connectors[b].option("selected")}this.draw()},Connector:function(a,c,b){var j=this;d.dm.loader.Connector(a,c,this,function(a){a!=f&&(j.connectors[a.euid]=a,"ConnectionHelper"!=a.options.toId&&e.log("REPORT: "+a.options.toId+"   FROM : "+a.options.fromId),j.draw(),b&&b(a))})},draw:function(){if(this.canvas){var a=this.canvas.getContext("2d");a.fillStyle="#EEEEEE";a.clearRect(0,0,this.canvas.width,this.canvas.height);if(0<Object.keys(this.connectors).length){for(var c in this.connectors)(a.lineWidth=
1,this.connectors[c].options.linewidth!=f&&(a.lineWidth=this.connectors[c].options.linewidth),this.connectors[c].options.selected)?(a.lineWidth+=2,this.connectors[c].redraw(a,"#43EC28"),a.lineWidth-=2,this.connectors[c].redraw(a)):this.selectedconntector==this.connectors[c]?this.connectors[c].redraw(a,"#43EC28"):this.connectors[c].options.color?this.connectors[c].redraw(a,this.connectors[c].options.color):this.connectors[c].redraw(a);a.lineWidth=1}}},isPointOnLine:function(a,c){if(0<Object.keys(this.connectors).length){if(!0==
this.transformStarted)return this.selectedconntector.TransformTo(a,c),this.draw(),!0;for(var b in this.connectors)if(this.connectors[b].isPointOnLine(a,c))return this.connectors[b]!=this.selectedconntector&&(this.selectedconntector=this.connectors[b],this.draw()),!0}this.selectedconntector!=f&&(this.selectedconntector._showMenu!=f&&this.selectedconntector._showMenu(a,c,!1),this.selectedconntector=f,d.at.cs.mouseover=null,this.draw());return!1}});d.base.diagram("es.element",{options:{drop:!1,nameTemplate:"Element",
width:140,height:200,left:140,top:200,selected:!1,area:"none",ctx_menu:"default",editable:!0},_create:function(){alert("Could not create virtual element !!!")},_update:function(){var a=e("#"+this.euid+"_Border").position();this.options.pageX=a.left;this.options.pageY=a.top;this.options.left=a.left;this.options.top=a.top;this.options.width=e("#"+this.euid+"_Border").width();this.options.height=e("#"+this.euid+"_Border").height();if(this._dropped){this.options.dropped=[];for(var c in this._dropped)this.parrent.elements[c]?
this.options.dropped.push(this.parrent.elements[c].options.id):alert("NOTE FOUND: "+c)}},_init:function(){this.options.height&&(e("#"+this.euid).css("width",this.options.width).css("height",this.options.height),e("#"+this.euid+"_Border").css("width",this.options.width));this.options.top&&e("#"+this.euid).css("top",this.options.top)},_baseinit:function(){var a="";this.options.pageX!=f&&this.options.pageY!=f&&(a=" style='top:"+this.options.pageY+"px;left:"+this.options.pageX+"px;' ");e(this.element).wrap('<div id="'+
this.euid+'_Border"'+a+' class="us-element-border"></div>');this.highlighted=!1;this.refN=0;this.options.references=this.options.references||[];var a=this.options.subdiagrams||this.options.references||{},c;c="<div class='us-references us-list'><ul class='context-menu-3'><li id='reference-new'><a>new reference</a></li></ul></div>";e("#"+this.euid+"_Border").css({position:"absolute"}).css("top",this.options.pageY).css("left",this.options.pageX);e("#"+this.euid+"_Border .ui-resizable-handle").css({visibility:"hidden"});
e("#"+this.euid).click(this,function(){e("#"+element.parrent.euid+" .us-references").hide()}).mouseenter(this,function(a){a=a.data;if(!a.options.selected&&!a.highlighted){a.highlighted=!0;var b=e("#"+this.id+"_Border").css({"border-width":"3px"}),c=b.css("border-left-width");b.css({left:"-="+c,top:"-="+c})}!a.parrent.options.editable&&(a.options.subdiagrams||0!=a.options.references.length)&&e("#"+this.id+"_REF").css({visibility:"visible"})}).mouseleave(this,function(a){a=a.data;if(!a.options.selected&&
a.highlighted){var b=e("#"+this.id+"_Border"),c=b.css("border-left-width");b.css({"border-width":"0px"}).css({left:"+="+c,top:"+="+c});a.highlighted=!1}e("#"+this.id+"_REF").css({visibility:"hidden"})}).append("<img id='"+this.euid+"_REF' title='REFERENCE' src='./images/reference.png' class='us-element-ref' style='z-index:99999;visibility:hidden;'></img>").parent().append(c);for(var b in a)this.addReference({text:a[b]},!0);e("#"+this.euid+"_Border .us-references").hide().click(function(a){a.stopPropagation()});
e("img#"+this.euid+"_REF").attr("title",this.options.subdiagrams).click(this,function(a){var b=a.data,c="none"==e("#"+b.euid+" .us-references").css("display");e("#"+b.parrent.euid+" .us-references").hide();c||(c=e(this).position(),e("#"+b.euid+"_Border .us-references").show().css({top:c.top+20,left:c.left}));a.stopPropagation()});this.options.color&&this._setOption("color",this.options.color);this.options.borderwidth&&this._setOption("borderwidth",this.options.borderwidth);this.options["font-family"]&&
this._setOption("font-family",this.options["font-family"]);this.options["z-index"]&&e("#"+this.euid+"_Border").css("z-index",this.options["z-index"])},addReference:function(a,c){var b;b="reference-"+this.refN;++this.refN;c||this.options.references.push(a.text);var j=a.idx==f?this.refN:a.idx;b=e("<li id='reference'><a id='"+b+"' class='editablefield reference'>"+a.text+"</a><a class='ui-corner-all'><span class='ui-test ui-icon ui-icon-close' style='float:right;'></span></a></li>");j=e("#"+this.euid+
"_Border .us-references ul li:eq("+j+")");b=1==j.length?b.insertAfter(j):b.appendTo("#"+this.euid+"_Border div.us-references ul");b=b.children("A.reference").bind("click",this,function(a){var b=a.data;b.parrent.options.editable||d.dm.fw.loadContent2(b.parrent.parrent,e(this).text());a.stopPropagation()})},_setOption:function(a,c){var b=this.options[a];if(!(this._setOption2!=f&&this._setOption2(a,c)))if("font-color"==a)e("#"+this.euid+"_Border.us-element-border a").css("color",c);else if("left"==a)e("#"+
this.euid+"_Border").css(a,c);else if("top"==a)e("#"+this.euid+"_Border").css(a,c);else if("color"==a)e("#"+this.euid).css("background-color",c||"");else if("borderwidth"==a)e("#"+this.euid).css("border-width",c||"");else if("width"==a)e("#"+this.euid+"_Border").css("width",c);else if("height"==a){if(e("#"+this.euid+"_Border").css("height",c),b&&c!=b){var b=parseInt(c)-parseInt(b),j=0<b?"+="+b:"-="+Math.abs(b);0!=b&&e("#"+this.euid+"_Border .us-element-resizable-area").css("height",j)}}else"font-family"==
a?e("#"+this.euid).css(a,c||""):"selected"==a?c?(e("#"+this.euid+"_Border .ui-resizable-handle").css({visibility:"visible"}),this.highlighted||(b=e("#"+this.euid+"_Border").css({"border-width":"3px"}),j=b.css("border-left-width"),b.css({left:"-="+j,top:"-="+j}),this.highlighted=!0)):(e("#"+this.euid+"_Border .ui-resizable-handle").css({visibility:"hidden"}),this.highlighted&&(b=e("#"+this.euid+"_Border"),j=b.css("border-left-width"),b.css({"border-width":"0px"}).css({left:"+="+j,top:"+="+j})),this.highlighted=
!1):"z-index"==a&&e("#"+this.euid+"_Border ").css(a,c||"");this.options[a]=c}});d.ds.diagram=d.ds.diagram||{};d.ds.diagram.ec=0;d.base.diagram("cs.connector",{options:{selected:!1,nameTemplate:"Connector",ctx_menu:"connector"},addLabel:function(a){var c=this,b=a.lid!=f?a.lid:this.euid+"_l"+this.label_count;a.lid==f&&++this.label_count;e("<div id='"+b+"' class='editablefield' style=\"position:absolute;z-index:99999;background-color:white;\">"+a.text+"</div>").appendTo("#"+this.parrent.euid).css("left",
a.left).css("top",a.top).mouseenter(function(){c.options.selected=!0;c.parrent.draw();for(var a in c.labels)e(c.labels[a]).addClass("us-connector-hover")}).mouseleave(function(){c.options.selected=!1;c.parrent.draw();for(var a in c.labels)e(c.labels[a]).removeClass("us-connector-hover")})},_setOption:function(a,c){if(c==f)delete this.options[a];else if("epoints"==a)for(var b in c)this.epoints[b][0]=c[b][0],this.epoints[b][1]=c[b][1];else if("labels"==a)for(b in c)this.labels[b].css({left:c[b][0],
top:c[b][1]});else this.options[a]=c},_create:function(){this.epoints=[];var a=this;this.options.epoints!=f&&e.each(this.options.epoints,function(b,c){a.epoints[b]=[];a.epoints[b][0]=parseInt(c[0]);a.epoints[b][1]=parseInt(c[1])});this.label_count=0;this.cleanOnNextTransform=!1;d.at.cs.created={euid:this.euid,from:this.options.fromId,to:this.options.toId};if(this.options.stored){for(var c in this.parrent.elements)if(this.parrent.elements[c].options.id==this.options.fromId&&(this.from=this.parrent.elements[c].euid),
this.parrent.elements[c].options.id==this.options.toId)this.toId=this.parrent.elements[c].euid;if(this.options.epoints)for(c in d.debug=d.debug||{},d.debug[this.euid]=this.options.epoints,this.epoints=[],this.options.epoints)this.epoints[c]={},this.epoints[c][0]=parseInt(this.options.epoints[c][0],10),this.epoints[c][1]=parseInt(this.options.epoints[c][1],10);this.options.fromId=this.from;this.options.toId=this.toId}else this.from=this.options.fromId,this.toId=this.options.toId;this.labels=[];for(c in this.options.labels){var b=
this.options.labels[c];this.addLabel({text:b.name,left:parseInt(b.x),top:parseInt(b.y)})}},_init:function(){},_baseinit:function(){},drawSelected:function(a,c,b){a.beginPath();a.fillStyle=b;a.strokeStyle=b;a.moveTo(c[0][0],c[0][1]);for(b=1;b<c.length;++b)a.lineTo(c[b][0],c[b][1]);a.stroke();a.closePath()},draw:function(){},redraw:function(a,c){var b=c||"rgba(0,0,0,1)";if(a!=f){this.points=this._getConnectionPoints(this.from,this.toId,this.epoints);this.gip=[];for(var j=0;j<this.points.length-1;++j){var e=
this.points[j][1]-this.points[j+1][1],d=this.points[j][0]-this.points[j+1][0];this.gip[j]=Math.sqrt(d*d+e*e)}this.draw(a,this.points,b)}},_getRValue:function(a,c,b){var f=c-a;return 0<f?f>b?a+b:c:a},isPointOnLine:function(a,c){if(this.points==f)return!1;for(var b=0;b<this.epoints.length;++b)if(this.epoints[b][0]-12<a&&this.epoints[b][0]+12>a&&this.epoints[b][1]-12<c&&this.epoints[b][1]+12>c)return d.at.cs.mouseover={euid:this.euid,idx:b},!0;for(b=0;b<this.points.length-1;++b){var j=a-this.points[b][0],
e=c-this.points[b][1],h=this.points[b+1][0]-a,g=this.points[b+1][1]-c,j=Math.sqrt(j*j+e*e),h=Math.sqrt(h*h+g*g);if(0.2>j+h-this.gip[b])return d.at.cs.mouseover={euid:this.euid},!0}return!1},canRemovePoint:function(a,c,b){if(a==f||c==f)return!1;var j=a[0]-c[0],e=a[1]-c[1],d=a[0]-b[0],g=a[1]-b[1],a=c[0]-b[0],c=c[1]-b[1],d=Math.sqrt(d*d+g*g),a=Math.sqrt(a*a+c*c),j=Math.sqrt(j*j+e*e);return 0.5>d+a-j?!0:!1},_getConnectionPoints:function(a,c,b){var j=e("#"+a).position(),d=e("#"+c).position();if(null!=
d){var h=e("#"+a+"_Border").position(),g=e("#"+c+"_Border").position(),l=e("#"+this.parrent.euid).scrollTop(),k=e("#"+this.parrent.euid).scrollLeft();if(b==f||0==b.length)var n=this._getRValue(j.left+h.left,d.left+g.left,e("#"+a).width()),o=this._getRValue(j.top+h.top,d.top+g.top,e("#"+a).height()),a=this._getRValue(d.left+g.left,j.left+h.left,e("#"+c).width()),c=this._getRValue(d.top+g.top,j.top+h.top,e("#"+c).height()),j=[[n+k,o+l],[a+k,c+l]];else{var l=e("#"+this.parrent.euid).scrollTop(),k=e("#"+
this.parrent.euid).scrollLeft(),p=b.length-1,n=this._getRValue(j.left+h.left,b[0][0]-k,e("#"+a).width()),o=this._getRValue(j.top+h.top,b[0][1]-l,e("#"+a).height()),a=this._getRValue(d.left+g.left,b[p][0]-k,e("#"+c).width()),c=this._getRValue(d.top+g.top,b[p][1]-l,e("#"+c).height()),j=[];j[0]=[n,o];for(n=1;n<=b.length;++n)j[n]=[b[n-1][0],b[n-1][1]],j[n][0]-=k,j[n][1]-=l;j[b.length+1]=[a,c]}return j}}})})(jQuery,dm);
(function(e,d,f){d.base.diagram("es.class",d.es.element,{options:{nameTemplate:"Class",width:"150px",height:"auto"},_getAux:function(a){var c=[];c.Class="";c.Interface="interface";c.Enumeration="enum";c.Primitive="primitive";c.ORM="ORM";c.ORMComponent="ORMComponent";c.Template=" ";c[f]="";return c[a]||a},addOperation:function(a){if("Enumeration"!=this.options.aux){var c=a.idx==f?this.opN:a.idx,b;b="operation-"+this.opN;++this.opN;this.options.operations.push(a.text);a=e('<li id="operation"><a id="'+
b+'" class="editablefield operation" >'+a.text+"</a></li>");c=e("#"+this.euid+" .us-class-operations .us-sortable li:eq("+c+")");1==c.length?a.insertAfter(c):a.appendTo("#"+this.euid+" .us-class-operations .us-sortable");a=a.children("a");c=a.height();d.base.editable(this,a,!0);a=e("#"+this.euid+" .us-class-operations .us-sortable").sortable("refresh").height();b=e("#"+this.euid+" .us-class-operations").height();a>b&&(e("#"+this.euid+"_Border").height(),e("#"+this.euid+"_Border").height("+="+c),e("#"+
this.euid+" .us-class-operations").height("+="+c),a=e("#"+this.euid+"_Border").height(),this.options.height=a,this.options.height_o+=c)}},addAttribute:function(a){if("Interface"!=this.options.aux){var c;c="attribute-"+this.atrN;++this.atrN;var b=a.idx==f?this.opN:a.idx,a=e('<li id="attribute"><a id="'+c+'" class="editablefield attribute" >'+a.text+"</a></li>"),b=e("#"+this.euid+" .us-class-attributes .us-sortable li:eq("+b+")"),a=1==b.length?a.insertAfter(b):a.appendTo("#"+this.euid+" .us-class-attributes .us-sortable"),
b=a.height(),a=e("#"+this.euid+" .us-class-attributes .us-sortable").sortable("refresh").height();c=e("#"+this.euid+" .us-class-attributes").height();a>c&&(e("#"+this.euid+"_Border .us-class-attributes").height(),e("#"+this.euid+"_Border").height("+="+b),e("#"+this.euid+" .us-class-attributes").height("+="+b),b=e("#"+this.euid+"_Border .us-class-attributes").height(),this.options.height_a=b,this.options.height=e("#"+this.euid+"_Border").height())}},_create:function(){var a="",c="";this.opN=this.atrN=
0;this.options.operations=this.options.operations||[];this.options.attributes=this.options.attributes||[];this.options.aux&&""!=this.options.aux&&(a=this._getAux(this.options.aux),a!=f&&(""!=a&&" "!=a)&&(c="&lt&lt "+a+" &gt&gt"),a="Template"!=this.options.aux?"":"<div id='template' class='editablefield us-class-template'>"+(this.options.template||"T")+"</div>");var b="",j="",d;for(d in this.options.operations)b+='<li id="operation"><a id="operation-'+this.atrN+'" class="editablefield operation">'+
this.options.operations[d]+"</a></li>",this.atrN++;for(d in this.options.attributes)j+='<li id="attribute"><a id="attribute-'+this.opN+'" class="editablefield attribute">'+this.options.attributes[d]+"</a></li>",this.opN++;this.innerHtmlClassInfo='        <div id="'+this.euid+'" class="us-class grElement">'+a+'        <div class="us-class-header">        <a id="name" class="editablefield us-class-name">'+this.options.name+'</a><br>        <a id="aux" class="us-class-aux">'+c+'</a>        </div>        <div class="us-class-attributes"><ul class="us-sortable">'+
j+'</ul></div>        <div class="us-class-operations us-element-resizable-area"><ul class="us-sortable">'+b+"</ul></div>        </div>      ";e("#"+this.parrent.euid).append(this.innerHtmlClassInfo);this.element=e("#"+this.euid)},_init:function(){this._setOptions(this.options);this.attributes=[];this.operations=[]},_setOption2:function(a,c){if("height_o"==a)return e("#"+this.euid+"_Border .us-class-operations").css("height",c),!0;if("height_a"==a){var b=this.options[a];e("#"+this.euid+"_Border .us-class-attributes").css("height",
c);b=parseInt(c)-parseInt(b);if(0!=b){var f=0<b?"+="+b:"-="+Math.abs(b);e("#"+this.euid+"_Border").css("height",f);this.options.height+=b}return!0}"editable"==a&&e("#"+this.euid+" .us-sortable").sortable({disabled:!0==c?!1:!0});return!1},ec:0})})(jQuery,dm);
(function(e,d,f){d.dm.loader=d.dm.loader||null;d.base.loader=function(a){d.dm.loader||(d.dm.loader=new function(){this.working=!1;return{getUrl:function(){return a},_addToLoadQueue:function(a){var b=d.dm.loader;b._loadQueue||(b.working=!1,b._loadQueue=[]);b._loadQueue.push(a);b._process(!1)},_process:function(c){var b=null,f=d.dm.loader;if(!f.working){if(c&&0<f._loadQueue.length||1==f._loadQueue.length&&!f.working)f.working=!0,b=f._loadQueue.shift();if(b){var m=b.callback,h=b.data;b.precondition()?
e.ajax({url:a+b.url,dataType:"script",success:function(){m(h);f.working=!1;f._process(!0)},error:function(){alert("Failed to load: "+a+b.url);f.working=!1;f._process(!0)}}):(m(h),f.working=!1,f._process(!0))}else f.working=!1}},OnLoadComplete:function(a,b){this._addToLoadQueue({url:"",precondition:function(){return!1},callback:function(b){a&&a(b)},data:b})},Diagram:function(a,b,j,m,h){(d.ds==f||d.ds.diagram==f)&&this._addToLoadQueue({url:"./dm/ds/diagram.js",precondition:function(){return!0},callback:function(){},
data:null});var g={},l=j||{};l.type=a;l.base_type=b;g.options=j;g.diagram=a;g.type=b;g.parrent=m;this._addToLoadQueue({url:"/dm/ds/"+b+".js",precondition:function(){return d.ds==f||d.ds[b]==f?!0:!1},callback:function(a){a=new d.ds[a.type](j,m);e.log("NAME: "+m);h&&h(a);return a},data:g})},LoadElement:function(a){d.es==f?alert("You should create diagram instance first !!!"):d.es[a]==f&&this._addToLoadQueue({url:"/dm/es/"+a+".js",precondition:function(){return d.es[a]==f?!0:!1},callback:function(){}})},
Element:function(a,b,e,m){if(d.es==f)alert("You should create diagram instance first !!!");else{var h={};h.options=b;h.type=a;h.diagram=e;this._addToLoadQueue({url:"/dm/es/"+a+".js",precondition:function(){return d.es[a]==f?!0:!1},callback:function(a){a=new d.es[a.type](a.options,a.diagram);m&&m(a)},data:h})}},Connector:function(a,b,e,m){if(d.cs==f)alert("You should create diagram instance first !!!");else{var h={};h.options=b;h.type=a;h.diagram=e;this._addToLoadQueue({url:"./dm/cs/"+a+".js",precondition:function(){return d.cs[a]==
f?!0:!1},callback:function(a){a=new d.cs[a.type](a.options,a.diagram);m!=f&&m(a)},data:h})}}}},d.dm.loader.url=a,d.dm.loader.working=!1);return d.dm.loader};d.base.loader=d.base.loader})(jQuery,dm);
(function(e,d){d.base.diagram("cs.aggregation",d.cs.connector,{draw:function(f,a,c){if(!(null==a||2>a.length)){var b=a.length-1,e=a[b][0]-a[b-1][0],d=a[b][1]-a[b-1][1],h=Math.sqrt(e*e+d*d);if(!(10>h)){var g=d/h,l=e/h,k=a[b][0]-Math.sqrt(75)*l,n=a[b][1]-Math.sqrt(75)*g,e=a[b][0]-Math.sqrt(300)*l,h=a[b][1]-Math.sqrt(300)*g,d=k+10*g/2,o=n-10*l/2,g=k-10*g/2,l=n+10*l/2;f.beginPath();f.fillStyle=c;f.strokeStyle=c;f.moveTo(a[0][0],a[0][1]);for(c=1;c<b;++c)f.lineTo(a[c][0],a[c][1]);f.moveTo(a[b-1][0],a[b-
1][1]);f.lineTo(e,h);f.lineTo(d,o);f.lineTo(a[b][0],a[b][1]);f.lineTo(g,l);f.lineTo(e,h);f.stroke();f.closePath()}}}})})(jQuery,dm);
(function(e,d){d.base.diagram("cs.nested",d.cs.connector,{draw:function(f,a,c){if(!(null==a||2>a.length)){var b=a.length-1,e=a[b][0]-a[b-1][0],d=a[b][1]-a[b-1][1],h=Math.sqrt(e*e+d*d),d=d/h,g=e/h,e=a[b][0]-Math.sqrt(168.75)*g,l=a[b][1]-Math.sqrt(168.75)*d,k=a[b][0]-Math.sqrt(675)*g,n=a[b][1]-Math.sqrt(675)*d,o=e+12*d/2,p=l-12*g/2,q=e-12*d/2,r=l+12*g/2,s=a[b][0]-Math.sqrt(108)*g,t=a[b][1]-Math.sqrt(108)*d,g=a[b][0]-Math.sqrt(432)*g,d=a[b][1]-Math.sqrt(432)*d;f.beginPath();f.fillStyle=c;f.strokeStyle=
c;f.moveTo(a[0][0],a[0][1]);for(i=1;i<b;++i)f.lineTo(a[i][0],a[i][1]);15>h||(f.moveTo(a[b-1][0],a[b-1][1]),f.lineTo(k,n),f.stroke(),f.moveTo(e,l),f.arc(e,l,7.5,0,2*Math.PI,!0),f.moveTo(o,p),f.lineTo(q,r),f.moveTo(s,t),f.lineTo(g,d),f.stroke(),f.closePath())}}})})(jQuery,dm);
(function(e,d){d.base.diagram("cs.composition",d.cs.connector,{draw:function(f,a,c){if(!(null==a||2>a.length)){var b=a.length-1,e=a[b][0]-a[b-1][0],d=a[b][1]-a[b-1][1],h=Math.sqrt(e*e+d*d);if(!(10>h)){var d=d/h,g=e/h,l=a[b][0]-Math.sqrt(75)*g,k=a[b][1]-Math.sqrt(75)*d,e=a[b][0]-Math.sqrt(300)*g,h=a[b][1]-Math.sqrt(300)*d,n=l+10*d/2,o=k-10*g/2,d=l-10*d/2,g=k+10*g/2;f.beginPath();f.fillStyle=c;f.strokeStyle=c;f.moveTo(a[0][0],a[0][1]);for(i=1;i<b;++i)f.lineTo(a[i][0],a[i][1]);f.stroke();f.closePath();
f.beginPath();f.fillStyle=c;f.strokeStyle=c;f.moveTo(a[b-1][0],a[b-1][1]);f.lineTo(e,h);f.lineTo(n,o);f.lineTo(a[b][0],a[b][1]);f.lineTo(d,g);f.lineTo(e,h);f.fill();f.stroke();f.closePath()}}}})})(jQuery,dm);
(function(e,d){d.base.diagram("cs.dependency",d.cs.connector,{dashedLine:function(f,a,c){var b=f[0],f=f[1],e=a[0]-b,d=a[1]-f,a=Math.sqrt(e*e+d*d);if(!(10>a)){var d=d/a,h=e/a,e=5*h,g=5*d,h=3*h,d=3*d;for(i=0;i<a/8;++i)c.moveTo(b,f),c.lineTo(b+e,f+g),b+=h+e,f+=d+g}},draw:function(f,a,c){if(!(null==a||2>a.length)){var b=a.length-1,e=a[b][0],d=a[b][1],h=e-a[b-1][0],g=d-a[b-1][1],b=Math.sqrt(h*h+g*g),g=g/b,l=h/b,k=e-Math.sqrt(75)*l,n=d-Math.sqrt(75)*g;Math.sqrt(300);Math.sqrt(300);h=k+10*g/2;b=n-10*l/2;
g=k-10*g/2;l=n+10*l/2;f.beginPath();f.fillStyle=c;f.strokeStyle=c;for(c=0;c<a.length-1;++c)this.dashedLine(a[c],a[c+1],f);f.moveTo(h,b);f.lineTo(e,d);f.lineTo(g,l);f.stroke();f.closePath()}}})})(jQuery,dm);
(function(e,d){d.base.diagram("cs.realization",d.cs.connector,{dashedLine:function(f,a,c){var b=f[0],f=f[1],e=a[0]-b,d=a[1]-f,a=Math.sqrt(e*e+d*d);if(!(10>a)){var d=d/a,h=e/a,e=5*h,g=5*d,h=3*h,d=3*d;for(i=0;i<a/8;++i)c.moveTo(b,f),c.lineTo(b+e,f+g),b+=h+e,f+=d+g}},draw:function(d,a,c){if(!(null==a||2>a.length)){var b=a.length-1,e=a[b][0],m=a[b][1],h=e-a[b-1][0],g=m-a[b-1][1],b=Math.sqrt(h*h+g*g),l=g/b,k=h/b,h=e-Math.sqrt(75)*k,g=m-Math.sqrt(75)*l;Math.sqrt(300);Math.sqrt(300);var n=h+10*l/2,o=g-10*
k/2,l=h-10*l/2,k=g+10*k/2;d.beginPath();d.fillStyle=c;d.strokeStyle=c;for(c=0;c<a.length-1;++c)this.dashedLine(a[c],a[c+1],d);10>b||(d.moveTo(h,g),d.lineTo(n,o),d.lineTo(e,m),d.lineTo(l,k),d.lineTo(h,g));d.stroke();d.closePath()}}})})(jQuery,dm);(function(e,d){d.base.diagram("ds.base",d.ds.diagram,{diagramName:"BaseDiagram",diagramEventPrefix:"CD",options:{width:1300,height:700,type:"base"},_init:function(){}})})(jQuery,window.dm);
(function(e,d){d.base.diagram("cs.generalization",d.cs.connector,{draw:function(d,a,c){if(!(null==a||2>a.length)){var b=a.length-1,e=a[b][0],m=a[b-1][0],h=a[b][1],g=a[b-1][1],l=e-m,k=h-g,n=Math.sqrt(l*l+k*k);if(!(10>n)){var k=k/n,o=l/n,l=e-Math.sqrt(75)*o,n=h-Math.sqrt(75)*k;Math.sqrt(300);Math.sqrt(300);var p=l+10*k/2,q=n-10*o/2,k=l-10*k/2,o=n+10*o/2;d.beginPath();d.fillStyle=c;d.strokeStyle=c;d.moveTo(a[0][0],a[0][1]);for(i=1;i<b;++i)d.lineTo(a[i][0],a[i][1]);d.moveTo(m,g);d.lineTo(l,n);d.lineTo(p,
q);d.lineTo(e,h);d.lineTo(k,o);d.lineTo(l,n);d.stroke();d.closePath()}}}})})(jQuery,dm);
